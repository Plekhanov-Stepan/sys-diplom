# Дипломная работа по профессии «Системный администратор» - Плеханов С.А.

## Задача
Ключевая задача — разработать отказоустойчивую инфраструктуру для сайта, включающую мониторинг, сбор логов и резервное копирование основных данных. Инфраструктура должна размещаться в Yandex Cloud и отвечать минимальным стандартам безопасности: запрещается выкладывать токен от облака в git.
## Решение
В рамках решения задачи были использованы механизмы создания инфраструктуры как кода (IaC) Terraform и Ansible. Конфигурация инфраструктуры хранится в файлах network.tf и vms.tf.
В результате была создана следующая структура объектов в YandexCloud:
<img src = "img/Screenshot_01.png" width=100%>
Инфраструктура включает 6 виртуальных машин:

<img src = "img/Screenshot_02.png" width=100%>

Так же создана одна облачная сеть с двумя подсетями в разных зонах:

<img src = "img/Screenshot_03.png" width=100%>

На двух виртуальных машинах, размещенных в разных подсетях размещен тестовый сайт:

<img src = "img/Screenshot_10.png" width=100%>

Виртуальные машины объединены в целевую группу:

<img src = "img/Screenshot_04.png" width=100%>

Так же создана бэкенд группа, которая ссылается на целевую группу:

<img src = "img/Screenshot_05.png" width=100%>

И HTTP-роутер:

<img src = "img/Screenshot_06.png" width=100%>

Создан балансировщик нагрузки, размещенный в публичном сегменте и имеющий внешний адрес для доступа пользователей сайта:

<img src = "img/Screenshot_07.png" width=100%>

Для мониторинга состояния виртуальных машин создан Zabbix сервер, а на всех ВМ установлены агенты, которые передают информацию на сервер:

<img src = "img/Screenshot_12.png" width=100%>

Для контроля состояния сайта организован сбор журналов на сервер Elasticsearch через агенты Filebeat, установленные на веб-серверах. Сервер расположен в приватном сегменте и не имеет внешнего адреса. Для визуализации журналов в публичном сегменте размещен сервер Kibana:

<img src = "img/Screenshot_11.png" width=100%>

В целях организации резервного копирования созданы снимки дисков всех виртуальных машин:

<img src = "img/Screenshot_08.png" width=100%>

А так же расписание, по которому снимки создаются ежедневно в 23:00 и хранятся 7 дней:

<img src = "img/Screenshot_09.png" width=100%>

